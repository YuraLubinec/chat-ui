<div id="page-wrapper">
  <div class="row">
    <div class="col-lg-12 col-md-12">
      <h1 class="page-header">Chat page</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12 col-md-12">
      <div class="alert alert-info cursor-pointer" (click)="startChat(connectionMessage.id,connectionMessage.dialog_id)" *ngFor='let connectionMessage of clientChatRequests'><i class="fa fa-comments" aria-hidden="true"></i>Клієнт {{connectionMessage.id}} хоче розпочати чат</div>
    </div>
  </div>
  
  <div class="row" *ngIf="display">
  <!--<div class="row" *ngIf="true">-->
    <div class="col-lg-12 col-md-12">
      <div class="chat-panel panel panel-default">
        <div class="panel-heading">
          <i class="fa fa-comments fa-fw"></i> Chat
          <div class="btn-group pull-right">
            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
              <i class="fa fa-chevron-down"></i>
            </button>
            <ul class="dropdown-menu slidedown">
              <li>
                <a href="#">
                  <i class="fa fa-refresh fa-fw"></i> Refresh
                </a>
              </li>
              <li>
                <a href="#">
                  <i class="fa fa-check-circle fa-fw"></i> Available
                </a>
              </li>
              <li>
                <a href="#">
                  <i class="fa fa-times fa-fw"></i> Busy
                </a>
              </li>
              <li>
                <a href="#">
                  <i class="fa fa-clock-o fa-fw"></i> Away
                </a>
              </li>
              <li class="divider"></li>
              <li>
                <a href="#">
                  <i class="fa fa-sign-out fa-fw"></i> Sign Out
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- /.panel-heading -->
        <div class="panel-body">
          <ul class="chat">
            <li class="clearfix" [ngClass]="{'left': message.isOperator, 'right': !message.isOperator}" *ngFor="let message of messages">
              <div class="chat-body clearfix">
                <div class="header" *ngIf="message.isOperator">
                  <strong class="primary-font">{{message.username}}</strong>
                  <small class="pull-right text-muted"><i class="fa fa-clock-o fa-fw"></i> {{message.date}}</small>
                </div>
                <div class="header" *ngIf="!message.isOperator">
                  <small class=" text-muted"><i class="fa fa-clock-o fa-fw"></i> {{message.date}}</small>
                  <strong class="pull-right primary-font">{{message.username}}</strong>
                </div>
                <p [class.pull-right]="!message.isOperator">
                  {{message.text}}
                </p>
              </div>
            </li>
          </ul>
        </div>
        <!-- /.panel-body -->
        <div class="panel-footer">
          <form role="form" [formGroup]="messageForm" (ngSubmit)="sendMessage()">
            <div class="input-group">
              <input id="btn-input" type="text" class="form-control input-sm" autofocus placeholder="Type your message here..." formControlName="text">
              <span class="input-group-btn">
                <button type="submit" [disabled]="!messageForm.valid" id="btn-chat" class="btn btn-warning btn-sm">Send</button>
              </span>
            </div>
          </form>
          <br>
          <button class="btn btn-danger btn-block" (click)="endChat()">cancel chat</button>
        </div>
        <!-- /.panel-footer -->
      </div>
      <!-- /.panel .chat-panel -->
    </div>
    <!-- /.col-lg-4 -->
  </div>
  <!-- /.row -->
</div>